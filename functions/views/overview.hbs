<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" type="image/png" href="img/cointoss.png"/>
    <link rel="stylesheet" href="style.css">
    <title>Overview</title>
</head>
<body>
    <div class="headerBar" id="headerBar">
        <div class='dropdown menu' id='userMenu'></div>
        <h1 class="center">Overview</h1>
        <div class="refresh button"></div>
    </div>
    <div class="container">
        <div class="inner hide">
            <div class="center title highlight" id="mainTitle"></div>
            <div class="subtitle highlight center" id="mainSub"></div>
            <div id="percentHolder">
                <div id="percentBar">
                    <div id="percentCrypto" class="minorDark bar"></div>
                    <div id="percentStocks" class="minorLight bar"></div>
                </div>
                <div id="percentText" class="minorLightText">
                    <div id="cryptoPercent" class="textLeft left"></div><div id="stockPercent" class="textRight right"></div>
                </div>
            </div>
            <div id="assetBreakdown" class="padTop">
                <div id="cryptoBox" class="left">
                    <div class="minorLightText">Crypto</div>
                    <div id="cryptoTotal" class="highlight subtitle"></div>
                    <div class="subtitle highlight" id="cryptoSub"></div>
                </div>
                <div id="stockBox" class="right rightText">
                    <div class="minorLightText">Stock</div>
                    <div id="stockTotal" class="highlight subtitle"></div>
                    <div class="subtitle highlight" id="stockSub"></div>
                </div>
            </div>
        </div>
    </div>
    <nav>
        <a class="button active" href="/overview">Overview</a>
        <a class="button" href="/portfolio">Portfolio</a>
        <a class="button" href="/stats">Stats</a>
        <a class="button" href="/historical">Historical</a>
    </nav>
    <script src="js/app.js"></script>
    <script src="js/overview.js"></script>
    <script>
        let initUser = (u) => {
            console.log(u)
            console.log({{totalValue.portfolioValue}});
            // percentBar + text
            let cryptoVal = `${parseFloat(({{totalValue.cryptoValue}}/{{totalValue.portfolioValue}}))*100}`;
            let stockVal = `${parseFloat(({{totalValue.stockValue}}/{{totalValue.portfolioValue}}))*100}`;
            document.querySelector('#percentCrypto').setAttribute(`style`, `width:${cryptoVal}%`);
            document.querySelector('#percentStocks').setAttribute(`style`, `width:${stockVal}%`);
            document.querySelector('#cryptoPercent').innerHTML = `${Math.round(parseFloat(cryptoVal))}%`;
            document.querySelector('#stockPercent').innerHTML = `${Math.round(parseFloat(stockVal))}%`;

            // portfolio total
            document.querySelector('#mainTitle').innerHTML = `$${parseFloat({{totalValue.portfolioValue}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')}`;
            document.querySelector('#mainSub').innerHTML = `<span class='textNetural'>(</span>$${parseFloat({{totalValue.portfolioGains}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')} <span class='textNetural'>/</span> ${parseFloat({{totalValue.portfolioGrowth}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')}%<span class='textNetural'>)</span>`;

            // crypto total
            document.querySelector('#cryptoTotal').innerHTML = `$${parseFloat({{totalValue.cryptoValue}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')}`;
            document.querySelector('#cryptoSub').innerHTML = `<span class='textNetural'>(</span>$${parseFloat({{totalValue.cryptoGains}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')} <span class='textNetural'>/</span> ${parseFloat({{totalValue.cryptoGrowth}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')}%<span class='textNetural'>)</span>`;

            // stock total
            document.querySelector('#stockTotal').innerHTML = `$${parseFloat({{totalValue.stockValue}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')}`;
            document.querySelector('#stockSub').innerHTML = `<span class='textNetural'>(</span>$${parseFloat({{totalValue.stockGains}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')} <span class='textNetural'>/</span> ${parseFloat({{totalValue.stockGrowth}}).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')}%<span class='textNetural'>)</span>`;
            document.querySelector('.inner').classList.remove('hide')
        }
    </script>
</body>
</html>
